<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    jQuery.noConflict();
</script>
<script src="../js/purl.js"></script>
<!-- Scattered plot based on http://bl.ocks.org/mbostock/3887118 -->
<!-- Tooltip example from http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html -->
<script src="../js/d3.v3.min.js"></script>
<script src="../js/scatteredPlot.js"></script>
<style>
body {
  font: 11px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.dot {
  stroke: #000;
}

.tooltip {
  position: absolute;
  width: 200px;
  height: 28px;
  pointer-events: none;
}
</style>
<script>
	var similarities_csv = "similarities.PMRA.FC-TA.csv";
	var selectedIndex = 0;
	var selectedOption = "both";
	window.onload = function() {	
		var radios = document.getElementsByName('whichTopic');
		radios[0].checked = true;
			
		var params = jQuery.url(location.href).param();		
		if (params.set) {
			set = params.set;
			if (set === "bm25") {
				similarities_csv = "similarities.BM25.FC-TA.csv";
			} else if (set === "cosine") {
				similarities_csv = "similarities.COSINE.FC-TA.csv";
			} else {
				similarities_csv = "similarities.PMRA.FC-TA.csv";	
			} 
		} else {
			similarities_csv = "similarities.PMRA.FC-TA.csv";
		}
		createList('pmidList', similarities_csv); 
		drawScatteredPlot('plot', lst[0], similarities_csv, "both");
	};
</script>
</head>
<body>
<body>
	<div id="pmidList">

	</div>
	<div id="topicText"></div>
	<div style="font-size: 13px">
		<p>
		Similarities for all articles having as reference the selected one will be displayed. 
		Articles are represented by circles or squares. 
		<br/><br/>
		We are working with articles from the TREC-2005 Genomics track
		where articles are grouped in topics. 
		<br/>
		Articles belonging to the same TREC topic as the selected one will
		be displayed as squares while others will be displayed as circles.
		<br/><br/>
		On mouse-over the articles, i.e., circles or squares, the similarity values based on annotations will be displayed as a tooltip.
		<br/>
		The first value (coordinate X) corresponds to the similarity based on full-text, the second one (coordinate Y) to the similarity based on title-and-abstract.
		<br/> 
		The PMID fo which the similarity values are calculated is also displayed.
		</p>
		<p>
		PMRA is the algorithm used by default. For Cosine or BM25, please add the parameter ?set=cosine or ?set=bm25 to the URL.
		</p>
	</div>
	<div id="topicDiv">
		<p style="font-size: 13px">You can select what articles are displayed based on the topic for the selected PMID</p>
		<input type="radio" name="whichTopic" value="both" checked onchange="selectedOption = 'both'; drawScatteredPlot('plot', lst[selectedIndex], similarities_csv, 'both');">All topics<br>
		<input type="radio" name="whichTopic" value="selected" onchange="selectedOption = 'selected'; drawScatteredPlot('plot', lst[selectedIndex], similarities_csv, 'selected');">Same TREC topic as the selected PMID<br>
		<input type="radio" name="whichTopic" value="other" onchange="selectedOption = 'other'; drawScatteredPlot('plot', lst[selectedIndex], similarities_csv, 'other');">Other topics<br>
	</div>
	<div id="plot">
		
	</div>
</body>
</html>